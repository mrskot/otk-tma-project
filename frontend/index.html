<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OTK Factory Mini App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <header>
        <h1>Главная Панель</h1>
        <h2 id="user-id">ID TG: Загрузка...</h2> 
        <h2 id="current-section">Роль: Проверка...</h2>
    </header>

    <div id="main-dashboard" class="screen active">
        <h3>Мои заявки</h3>
        <p>4</p>
        
        <h3>Все заявки</h3>
        <p>45</p>

        <h3 style="color: red;">⚠️ Несоответствия</h3>
        <p>2</p>

        <button>Статистика участка</button>
        <button data-screen-target="create-request">+ Новая заявка</button>
        
        <br><br>
        
        <button data-screen-target="my-requests">Мои заявки (Список)</button>
    </div>

    <div id="create-request" class="screen">
        <h2>Создание Заявки (Мастер)</h2>
        <form id="request-form">
            
            <label for="section-select">Участок Приемки (Отправитель)</label>
            <select id="section-select" name="section-select" required>
                </select>

            <label for="transformer-type">Тип Трансформатора</label>
            <input type="text" id="transformer-type" name="transformer-type" placeholder="Например: ТМГ 1000/10/0,4" required>

            <label for="product-number">Номер Изделия (Зав. номер)</label>
            <input type="text" id="product-number" name="product-number" placeholder="Номер изделия" required>
            
            <label for="drawing-number">Номер Чертежа</label>
            <input type="text" id="drawing-number" name="drawing-number" placeholder="Введите номер чертежа">

            <label for="semi-product">Тип Полуфабриката (доп. поле)</label>
            <input type="text" id="semi-product" name="semi-product" placeholder="Катушка / Бак / Активная часть">
            
            <label for="initial-description">Причины Вызова ОТК</label>
            <textarea id="initial-description" name="initial-description" rows="3" placeholder="Детальное описание работы, которую нужно выполнить"></textarea>

            <label>Прикрепить Фотографии</label>
            <input type="file" id="upload-files" name="upload-files" multiple>
            <button type="submit">Создать Заявку и Отправить в Б24</button>
        </form>
        <button data-screen-target="main-dashboard">← Назад</button>
    </div>

    <div id="my-requests" class="screen">
        <h2>Мои Заявки</h2>
        <p>Список заявок, созданных вами. (Кликните для Просмотра Карточки)</p>
        <button data-screen-target="main-dashboard">← К Списку</button>
    </div>

    <div id="request-card" class="screen">
        <h2>Карточка Заявки №[ID]</h2>
        <p>Детальная информация по заявке, ее статус и история действий.</p>
        <button data-screen-target="my-requests">← Назад</button>
    </div>
    
    <div id="all-requests" class="screen">
        <h2>Несоответствия</h2>
        <p>Список отклонений, требующих внимания. (Разработка на следующих этапах)</p>
        <button data-screen-target="main-dashboard">← Назад</button>
    </div>

    <script src="app.js"></script>
</body>
</html>